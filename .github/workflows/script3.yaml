name: Script 3

on:
  workflow_call:
    inputs:
      env-vars:
        type: string
        default: ""

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - name: Reflect Env Propagation
        run: 
          # Generic propagation of environment variables
          INPUT_ENV_VARS="${{ inputs.env-vars }}
          INPUT="${INPUT_ENV_VARS#*$'\n-- '}"
          while [[ -n "$INPUT" ]]; do
            [[ "$INPUT" == *$'\n-- '* ]] && { block="${INPUT%%$'\n-- '*}"; INPUT="${INPUT#*$'\n-- '}"; } || { block="$INPUT"; INPUT=""; }
            export "${block%%=*}=${block#*=}"
            echo "${block%%=*}=${block#*=}"
            echo "----------"
          done
  
